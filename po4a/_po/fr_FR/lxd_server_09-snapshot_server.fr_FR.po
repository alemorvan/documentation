# French translations for po package
# Traductions françaises du paquet po
# Copyright (C) 2023 Free Software Foundation, Inc.
# This file is distributed under the same license as the po package.
# Automatically generated, 2023.
#
msgid ""
msgstr ""
"Project-Id-Version: po 4a\n"
"POT-Creation-Date: 2023-06-16 15:06+0000\n"
"PO-Revision-Date: 2023-06-16 15:06+0000\n"
"Last-Translator: Automatically generated\n"
"Language-Team: none\n"
"Language: fr\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Plural-Forms: nplurals=2; plural=(n > 1);\n"

#. type: YAML Front Matter: tags
#: ../src/docs/books/disa_stig/disa_stig_part2.md:1
#: ../src/docs/books/disa_stig/disa_stig_part3.md:1
#: ../src/docs/books/disa_stig/disa_stig_part1.md:1
#: ../src/docs/books/lxd_server/00-toc.md:1
#: ../src/docs/books/lxd_server/01-install.md:1
#: ../src/docs/books/lxd_server/02-zfs_setup.md:1
#: ../src/docs/books/lxd_server/03-lxdinit.md:1
#: ../src/docs/books/lxd_server/04-firewall.md:1
#: ../src/docs/books/lxd_server/05-lxd_images.md:1
#: ../src/docs/books/lxd_server/06-profiles.md:1
#: ../src/docs/books/lxd_server/07-configurations.md:1
#: ../src/docs/books/lxd_server/08-snapshots.md:1
#: ../src/docs/books/lxd_server/09-snapshot_server.md:1
#: ../src/docs/books/lxd_server/10-automating.md:1
#, no-wrap
msgid "enterprise"
msgstr ""

#. type: YAML Front Matter: contributors
#: ../src/docs/books/lxd_server/00-toc.md:1
#: ../src/docs/books/lxd_server/01-install.md:1
#: ../src/docs/books/lxd_server/02-zfs_setup.md:1
#: ../src/docs/books/lxd_server/03-lxdinit.md:1
#: ../src/docs/books/lxd_server/04-firewall.md:1
#: ../src/docs/books/lxd_server/05-lxd_images.md:1
#: ../src/docs/books/lxd_server/06-profiles.md:1
#: ../src/docs/books/lxd_server/07-configurations.md:1
#: ../src/docs/books/lxd_server/08-snapshots.md:1
#: ../src/docs/books/lxd_server/09-snapshot_server.md:1
#: ../src/docs/books/lxd_server/10-automating.md:1
#: ../src/docs/gemstones/bash_stub.md:1
#: ../src/docs/guides/automation/cron_jobs_howto.md:1
#: ../src/docs/guides/backup/rsnapshot_backup.md:1
#: ../src/docs/guides/cms/cloud_server_using_nextcloud.md:1
#: ../src/docs/guides/cms/dokuwiki_server.md:1
#: ../src/docs/guides/contribute/mkdocs_lsyncd.md:1
#: ../src/docs/guides/contribute/navigation.md:1
#: ../src/docs/guides/desktop/kde_installation.md:1
#: ../src/docs/guides/dns/private_dns_server_using_bind.md:1
#: ../src/docs/guides/email/postfix_reporting.md:1
#: ../src/docs/guides/file_sharing/secure_ftp_server_vsftpd.md:1
#: ../src/docs/guides/file_sharing/sftp.md:1
#: ../src/docs/guides/network/librenms_monitoring_server.md:1
#: ../src/docs/guides/security/enabling_iptables_firewall.md:1
#: ../src/docs/guides/security/ssh_public_private_keys.md:1
#: ../src/docs/guides/security/ssl_keys_https.md:1
#: ../src/docs/guides/web/apache-sites-enabled.md:1
#: ../src/docs/guides/web/apache_hardened_webserver/index.md:1
#: ../src/docs/guides/web/apache_hardened_webserver/modsecurity.md:1
#: ../src/docs/guides/web/apache_hardened_webserver/ossec-hids.md:1
#: ../src/docs/guides/web/apache_hardened_webserver/rkhunter.md:1
#, no-wrap
msgid "Ezequiel Bruni"
msgstr ""

#. type: YAML Front Matter: tags
#: ../src/docs/books/lxd_server/00-toc.md:1
#: ../src/docs/books/lxd_server/01-install.md:1
#: ../src/docs/books/lxd_server/02-zfs_setup.md:1
#: ../src/docs/books/lxd_server/03-lxdinit.md:1
#: ../src/docs/books/lxd_server/04-firewall.md:1
#: ../src/docs/books/lxd_server/05-lxd_images.md:1
#: ../src/docs/books/lxd_server/06-profiles.md:1
#: ../src/docs/books/lxd_server/07-configurations.md:1
#: ../src/docs/books/lxd_server/08-snapshots.md:1
#: ../src/docs/books/lxd_server/09-snapshot_server.md:1
#: ../src/docs/books/lxd_server/10-automating.md:1
#: ../src/docs/books/lxd_server/30-appendix_a.md:1
#, no-wrap
msgid "lxd"
msgstr ""

#. type: YAML Front Matter: tags
#: ../src/docs/books/lxd_server/09-snapshot_server.md:1
#, no-wrap
msgid "lxd snapshot server"
msgstr ""

#. type: YAML Front Matter: title
#: ../src/docs/books/lxd_server/09-snapshot_server.md:1
#, no-wrap
msgid "9 Snapshot Server"
msgstr ""

#. type: Title #
#: ../src/docs/books/lxd_server/09-snapshot_server.md:12
#, no-wrap
msgid "Chapter 9: Snapshot Server"
msgstr ""

#. type: Plain text
#: ../src/docs/books/lxd_server/09-snapshot_server.md:15
#, no-wrap
msgid "This chapter uses a combination of the privileged (root) user, and the unprivileged (lxdadmin) user, based on the tasks we are executing.\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/lxd_server/09-snapshot_server.md:17
#, no-wrap
msgid "As noted at the beginning, the snapshot server for LXD should be a mirror of the production server in every way possible. The reason is that you may need to take it to production in the event of a hardware failure, and having not only backups, but a quick way to bring up production containers, keeps those systems administrator panic phone calls and text messages to a minimum. THAT is ALWAYS good!\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/lxd_server/09-snapshot_server.md:19
#, no-wrap
msgid "So the process of building the snapshot server is exactly like the production server. To fully emulate our production server set up, do all of **Chapters 1-4** again on the snapshot server, and when completed, return to this spot.\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/lxd_server/09-snapshot_server.md:21
#, no-wrap
msgid "You're back!! Congratulations, this must mean that you have successfully completed the basic install for the snapshot server. That's great news!!\n"
msgstr ""

#. type: Title ##
#: ../src/docs/books/lxd_server/09-snapshot_server.md:22
#, no-wrap
msgid "Setting Up The Primary and Snapshot Server Relationship"
msgstr ""

#. type: Plain text
#: ../src/docs/books/lxd_server/09-snapshot_server.md:25
#, no-wrap
msgid "We've got some housekeeping to do before we continue. First, if you are running in a production environment, you probably have access to a DNS server that you can use for setting up IP to name resolution.\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/lxd_server/09-snapshot_server.md:27
#, no-wrap
msgid "In our lab, we don't have that luxury. Perhaps you've got the same scenario running. For this reason, we are going to add both servers IP addresses and names to the /etc/hosts file on BOTH the primary and the snapshot server. You'll need to do this as your root (or _sudo_) user.\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/lxd_server/09-snapshot_server.md:29
#, no-wrap
msgid "In our lab, the primary LXD server is running on 192.168.1.106 and the snapshot LXD server is running on 192.168.1.141. We will SSH into both servers and add the following to the /etc/hosts file:\n"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/lxd_server/09-snapshot_server.md:30
#, no-wrap
msgid ""
"192.168.1.106 lxd-primary\n"
"192.168.1.141 lxd-snapshot\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/lxd_server/09-snapshot_server.md:36
#, no-wrap
msgid "Next, we need to allow all traffic between the two servers. To do this, we are going to modify the /etc/firewall.conf file with the following. First, on the lxd-primary server, add this line:\n"
msgstr ""

#. type: Title ###
#: ../src/docs/books/lxd_server/09-snapshot_server.md:37
#, no-wrap
msgid "Iptables - (Use the `firewalld` procedure if possible)"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/lxd_server/09-snapshot_server.md:39
#, no-wrap
msgid "IPTABLES -A INPUT -s 192.168.1.141 -j ACCEPT\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/lxd_server/09-snapshot_server.md:44
#, no-wrap
msgid "And on the lxd-snapshot server, add this line:\n"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/lxd_server/09-snapshot_server.md:45
#, no-wrap
msgid "IPTABLES -A INPUT -s 192.168.1.106 -j ACCEPT\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/lxd_server/09-snapshot_server.md:50
#, no-wrap
msgid "This allows bi-directional traffic of all types to travel between the two servers.\n"
msgstr ""

#. type: Title ###
#: ../src/docs/books/lxd_server/09-snapshot_server.md:51
#, no-wrap
msgid "Firewalld"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/lxd_server/09-snapshot_server.md:53
#, no-wrap
msgid "firewall-cmd zone=trusted add-source=192.168.1.141 --permanent\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/lxd_server/09-snapshot_server.md:58
#, no-wrap
msgid "and on the snapshot server, add this rule:\n"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/lxd_server/09-snapshot_server.md:59
#, no-wrap
msgid "firewall-cmd zone=trusted add-source=192.168.1.106 --permanent\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/lxd_server/09-snapshot_server.md:64
#, no-wrap
msgid "then reload:\n"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/lxd_server/09-snapshot_server.md:65
#, no-wrap
msgid "firewall-cmd reload\n"
msgstr ""

#. type: Title ##
#: ../src/docs/books/lxd_server/09-snapshot_server.md:69
#, no-wrap
msgid "Setting Up The Primary and Snapshot Server Relationship (continued)"
msgstr ""

#. type: Plain text
#: ../src/docs/books/lxd_server/09-snapshot_server.md:72
#, no-wrap
msgid "Next, as our unprivileged (lxdadmin) user, we need to set the trust relationship between the two machines. This is done by executing the following on lxd-primary:\n"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/lxd_server/09-snapshot_server.md:73
#, no-wrap
msgid "lxc remote add lxd-snapshot\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/lxd_server/09-snapshot_server.md:79
#, no-wrap
msgid ""
"This will display the certificate to accept, so do that, and then it will prompt for your password. This is the \"trust password\" that you set up when doing the LXD initialization step. Hopefully, you are securely keeping track of all of these passwords. Once you\n"
" enter the password, you should receive this:\n"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/lxd_server/09-snapshot_server.md:80
#, no-wrap
msgid "Client certificate stored at server:  lxd-snapshot\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/lxd_server/09-snapshot_server.md:85
#, no-wrap
msgid "It does not hurt to have this done in reverse as well. In other words, set the trust relationship on the lxd-snapshot server so that, if needed, snapshots can be sent back to the lxd-primary server. Simply repeat the steps and substitute in \"lxd-primary\" for \"lxd-snapshot.\"\n"
msgstr ""

#. type: Title ###
#: ../src/docs/books/lxd_server/09-snapshot_server.md:86
#, no-wrap
msgid "Migrating Our First Snapshot"
msgstr ""

#. type: Plain text
#: ../src/docs/books/lxd_server/09-snapshot_server.md:89
#, no-wrap
msgid "Before we can migrate our first snapshot, we need to have any profiles created on lxd-snapshot that we have created on the lxd-primary. In our case, this is the \"macvlan\" profile.\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/lxd_server/09-snapshot_server.md:91
#, no-wrap
msgid "You'll need to create this for lxd-snapshot, so go back to [Chapter 6](06-profiles.md) and create the \"macvlan\" profile on lxd-snapshot. If your two servers have identical parent interface names (\"enp3s0\" for example) then you can copy the \"macvlan\" profile over to lxd-snapshot without recreating it:\n"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/lxd_server/09-snapshot_server.md:92
#, no-wrap
msgid "lxc profile copy macvlan lxd-snapshot\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/lxd_server/09-snapshot_server.md:97
#, no-wrap
msgid "Now that we have all of the relationships and profiles set up, the next step is to actually send a snapshot from lxd-primary over to lxd-snapshot. If you've been following along exactly, you've probably deleted all of your snapshots, so let's create a new one:\n"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/lxd_server/09-snapshot_server.md:98
#, no-wrap
msgid "lxc snapshot rockylinux-test-9 rockylinux-test-9-snap1\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/lxd_server/09-snapshot_server.md:103
#, no-wrap
msgid "If you run the \"info\" sub-command for lxc, you can see the new snapshot on the bottom of our listing:\n"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/lxd_server/09-snapshot_server.md:104
#, no-wrap
msgid "lxc info rockylinux-test-9\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/lxd_server/09-snapshot_server.md:109
#, no-wrap
msgid "Which will show something like this at the bottom:\n"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/lxd_server/09-snapshot_server.md:110
#, no-wrap
msgid "rockylinux-test-9-snap1 at 2021/05/13 16:34 UTC) (stateless)\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/lxd_server/09-snapshot_server.md:115
#, no-wrap
msgid "OK, fingers crossed! Let's try to migrate our snapshot:\n"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/lxd_server/09-snapshot_server.md:116
#, no-wrap
msgid "lxc copy rockylinux-test-9/rockylinux-test-9-snap1 lxd-snapshot:rockylinux-test-9\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/lxd_server/09-snapshot_server.md:121
#, no-wrap
msgid "What this command says is, that within the container rockylinux-test-9, we want to send the snapshot, rockylinux-test-9-snap1 over to lxd-snapshot and copy it as rockylinux-test-9.\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/lxd_server/09-snapshot_server.md:123
#, no-wrap
msgid "After a short period of time has expired, the copy will be complete. Want to find out for sure?  Do an \"lxc list\" on the lxd-snapshot server. Which should return the following:\n"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/lxd_server/09-snapshot_server.md:124
#, no-wrap
msgid ""
"+-------------------+---------+------+------+-----------+-----------+\n"
"|    NAME           |  STATE  | IPV4 | IPV6 |   TYPE    | SNAPSHOTS |\n"
"+-------------------+---------+------+------+-----------+-----------+\n"
"| rockylinux-test-9 | STOPPED |      |      | CONTAINER | 0         |\n"
"+-------------------+---------+------+------+-----------+-----------+\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/lxd_server/09-snapshot_server.md:133
#, no-wrap
msgid "Success! Now let's try starting it. Because we are starting it on the lxd-snapshot server, we need to stop it first on the lxd-primary server to avoid an IP address conflict:\n"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/lxd_server/09-snapshot_server.md:134
#, no-wrap
msgid "lxc stop rockylinux-test-9\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/lxd_server/09-snapshot_server.md:139
#, no-wrap
msgid "And on the lxd-snapshot server:\n"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/lxd_server/09-snapshot_server.md:140
#, no-wrap
msgid "lxc start rockylinux-test-9\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/lxd_server/09-snapshot_server.md:145
#, no-wrap
msgid "Assuming all of this works without error, stop the container on lxd-snapshot and start it again on lxd-primary.\n"
msgstr ""

#. type: Title ##
#: ../src/docs/books/lxd_server/09-snapshot_server.md:146
#, no-wrap
msgid "Setting boot.autostart To Off For Containers"
msgstr ""

#. type: Plain text
#: ../src/docs/books/lxd_server/09-snapshot_server.md:149
#, no-wrap
msgid "The snapshots copied to lxd-snapshot will be down when they are migrated, but if you have a power event or need to reboot the snapshot server because of updates or something, you will end up with a problem as those containers will attempt to start on the snapshot server.\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/lxd_server/09-snapshot_server.md:151
#, no-wrap
msgid "To eliminate this, we need to set the migrated containers so that they will not start on reboot of the server. For our newly copied rockylinux-test-9 container, this is done with the following:\n"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/lxd_server/09-snapshot_server.md:152
#, no-wrap
msgid "lxc config set rockylinux-test-9 boot.autostart 0\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/lxd_server/09-snapshot_server.md:157
#, no-wrap
msgid "Do this for each snapshot on the lxd-snapshot server.\n"
msgstr ""

#. type: Title ##
#: ../src/docs/books/lxd_server/09-snapshot_server.md:158
#, no-wrap
msgid "Automating The Snapshot Process"
msgstr ""

#. type: Plain text
#: ../src/docs/books/lxd_server/09-snapshot_server.md:161
#, no-wrap
msgid "Ok, so it's great that you can create snapshots when you need to, and sometimes you _do_ need to manually create a snapshot. You might even want to manually copy it over to lxd-snapshot. BUT, once you've got things going and you've got 25 to 30 containers or more running on your lxd-primary machine, the very last thing you want to do is spend an afternoon deleting snapshots on the snapshot server, creating new snapshots and sending them over.\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/lxd_server/09-snapshot_server.md:163
#, no-wrap
msgid "The first thing we need to do is schedule a process to automate snapshot creation on lxd-primary. This has to be done for each container on the lxd-primary server, but once it is set up, it will take care of itself. This is done with the following syntax. Note the similarities to a crontab entry for the timestamp:\n"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/lxd_server/09-snapshot_server.md:164
#, no-wrap
msgid "lxc config set [container_name] snapshots.schedule \"50 20 * * *\"\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/lxd_server/09-snapshot_server.md:169
#, no-wrap
msgid "What this is saying is, do a snapshot of the container name every day at 8:50 PM.\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/lxd_server/09-snapshot_server.md:171
#, no-wrap
msgid "To apply this to our rockylinux-test-9 container:\n"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/lxd_server/09-snapshot_server.md:172
#, no-wrap
msgid "lxc config set rockylinux-test-9 snapshots.schedule \"50 20 * * *\"\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/lxd_server/09-snapshot_server.md:177
#, no-wrap
msgid "We also want to set up the name of the snapshot to be meaningful by our date. LXD uses UTC everywhere, so our best bet to keep track of things, is to set the snapshot name with a date/time stamp that is in a more understandable format:\n"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/lxd_server/09-snapshot_server.md:178
#, no-wrap
msgid "lxc config set rockylinux-test-9 snapshots.pattern \"rockylinux-test-9{{ creation_date|date:'2006-01-02_15-04-05' }}\"\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/lxd_server/09-snapshot_server.md:183
#, no-wrap
msgid "GREAT, but we certainly don't want a new snapshot every day without getting rid of an old one, right?  We'd fill up the drive with snapshots. So next we run:\n"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/lxd_server/09-snapshot_server.md:184
#, no-wrap
msgid "lxc config set rockylinux-test-9 snapshots.expiry 1d\n"
msgstr ""
