# SOME DESCRIPTIVE TITLE
# Copyright (C) YEAR Free Software Foundation, Inc.
# This file is distributed under the same license as the PACKAGE package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: PACKAGE VERSION\n"
"POT-Creation-Date: 2023-06-16 14:06+0000\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"Language: \n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#. type: YAML Front Matter: tags
#: ../src/docs/books/disa_stig/disa_stig_part2.md:1
#: ../src/docs/books/disa_stig/disa_stig_part3.md:1
#: ../src/docs/books/disa_stig/disa_stig_part1.md:1
#: ../src/docs/books/lxd_server/00-toc.md:1
#: ../src/docs/books/lxd_server/01-install.md:1
#: ../src/docs/books/lxd_server/02-zfs_setup.md:1
#: ../src/docs/books/lxd_server/03-lxdinit.md:1
#: ../src/docs/books/lxd_server/04-firewall.md:1
#: ../src/docs/books/lxd_server/05-lxd_images.md:1
#: ../src/docs/books/lxd_server/06-profiles.md:1
#: ../src/docs/books/lxd_server/07-configurations.md:1
#: ../src/docs/books/lxd_server/08-snapshots.md:1
#: ../src/docs/books/lxd_server/09-snapshot_server.md:1
#: ../src/docs/books/lxd_server/10-automating.md:1
#, no-wrap
msgid "enterprise"
msgstr ""

#. type: YAML Front Matter: contributors
#: ../src/docs/books/lxd_server/00-toc.md:1
#: ../src/docs/books/lxd_server/01-install.md:1
#: ../src/docs/books/lxd_server/02-zfs_setup.md:1
#: ../src/docs/books/lxd_server/03-lxdinit.md:1
#: ../src/docs/books/lxd_server/04-firewall.md:1
#: ../src/docs/books/lxd_server/05-lxd_images.md:1
#: ../src/docs/books/lxd_server/06-profiles.md:1
#: ../src/docs/books/lxd_server/07-configurations.md:1
#: ../src/docs/books/lxd_server/08-snapshots.md:1
#: ../src/docs/books/lxd_server/09-snapshot_server.md:1
#: ../src/docs/books/lxd_server/10-automating.md:1
#: ../src/docs/gemstones/bash_stub.md:1
#: ../src/docs/guides/automation/cron_jobs_howto.md:1
#: ../src/docs/guides/backup/rsnapshot_backup.md:1
#: ../src/docs/guides/cms/cloud_server_using_nextcloud.md:1
#: ../src/docs/guides/cms/dokuwiki_server.md:1
#: ../src/docs/guides/contribute/mkdocs_lsyncd.md:1
#: ../src/docs/guides/contribute/navigation.md:1
#: ../src/docs/guides/desktop/kde_installation.md:1
#: ../src/docs/guides/dns/private_dns_server_using_bind.md:1
#: ../src/docs/guides/email/postfix_reporting.md:1
#: ../src/docs/guides/file_sharing/secure_ftp_server_vsftpd.md:1
#: ../src/docs/guides/file_sharing/sftp.md:1
#: ../src/docs/guides/network/librenms_monitoring_server.md:1
#: ../src/docs/guides/security/enabling_iptables_firewall.md:1
#: ../src/docs/guides/security/ssh_public_private_keys.md:1
#: ../src/docs/guides/security/ssl_keys_https.md:1
#: ../src/docs/guides/web/apache-sites-enabled.md:1
#: ../src/docs/guides/web/apache_hardened_webserver/index.md:1
#: ../src/docs/guides/web/apache_hardened_webserver/modsecurity.md:1
#: ../src/docs/guides/web/apache_hardened_webserver/ossec-hids.md:1
#: ../src/docs/guides/web/apache_hardened_webserver/rkhunter.md:1
#, no-wrap
msgid "Ezequiel Bruni"
msgstr ""

#. type: YAML Front Matter: tags
#: ../src/docs/books/lxd_server/00-toc.md:1
#: ../src/docs/books/lxd_server/01-install.md:1
#: ../src/docs/books/lxd_server/02-zfs_setup.md:1
#: ../src/docs/books/lxd_server/03-lxdinit.md:1
#: ../src/docs/books/lxd_server/04-firewall.md:1
#: ../src/docs/books/lxd_server/05-lxd_images.md:1
#: ../src/docs/books/lxd_server/06-profiles.md:1
#: ../src/docs/books/lxd_server/07-configurations.md:1
#: ../src/docs/books/lxd_server/08-snapshots.md:1
#: ../src/docs/books/lxd_server/09-snapshot_server.md:1
#: ../src/docs/books/lxd_server/10-automating.md:1
#: ../src/docs/books/lxd_server/30-appendix_a.md:1
#, no-wrap
msgid "lxd"
msgstr ""

#. type: Plain text
#: ../src/docs/books/lxd_server/01-install.md:176
#: ../src/docs/books/lxd_server/10-automating.md:65
#, no-wrap
msgid "Save your changes and exit.\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/lxd_server/04-firewall.md:15
#: ../src/docs/books/lxd_server/10-automating.md:15
#, no-wrap
msgid "Throughout this chapter you will need to be root or able to `sudo` to become root.\n"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/lxd_server/06-profiles.md:190
#: ../src/docs/books/lxd_server/10-automating.md:54
#, no-wrap
msgid "crontab -e\n"
msgstr ""

#. type: YAML Front Matter: tags
#: ../src/docs/books/lxd_server/10-automating.md:1
#, no-wrap
msgid "lxd automation"
msgstr ""

#. type: YAML Front Matter: title
#: ../src/docs/books/lxd_server/10-automating.md:1
#, no-wrap
msgid "10 Automating Snapshots"
msgstr ""

#. type: Title #
#: ../src/docs/books/lxd_server/10-automating.md:12
#, no-wrap
msgid "Chapter 10: Automating Snapshots"
msgstr ""

#. type: Plain text
#: ../src/docs/books/lxd_server/10-automating.md:17
#, no-wrap
msgid "Automating the snapshot process makes things a whole lot easier. \n"
msgstr ""

#. type: Title ##
#: ../src/docs/books/lxd_server/10-automating.md:18
#, no-wrap
msgid "Automating The Snapshot Copy Process"
msgstr ""

#. type: Plain text
#: ../src/docs/books/lxd_server/10-automating.md:21
#, no-wrap
msgid "This process is performed on lxd-primary. First thing we need to do is create a script that will be run by cron in /usr/local/sbin called \"refresh-containers\" :\n"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/lxd_server/10-automating.md:22
#, no-wrap
msgid "sudo vi /usr/local/sbin/refreshcontainers.sh\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/lxd_server/10-automating.md:27
#, no-wrap
msgid "The script is pretty simple:\n"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/lxd_server/10-automating.md:28
#, no-wrap
msgid ""
"#!/bin/bash\n"
"# This script is for doing an lxc copy --refresh against each container, copying\n"
"# and updating them to the snapshot server.\n"
"\n"
"for x in $(/var/lib/snapd/snap/bin/lxc ls -c n --format csv)\n"
"        do echo \"Refreshing $x\"\n"
"        /var/lib/snapd/snap/bin/lxc copy --refresh $x lxd-snapshot:$x\n"
"        done\n"
"\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/lxd_server/10-automating.md:41
#, no-wrap
msgid " Make it executable:\n"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/lxd_server/10-automating.md:42
#, no-wrap
msgid "sudo chmod +x /usr/local/sbin/refreshcontainers.sh\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/lxd_server/10-automating.md:47
#, no-wrap
msgid "Change the ownership of this script to your lxdadmin user and group:\n"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/lxd_server/10-automating.md:48
#, no-wrap
msgid "sudo chown lxdadmin.lxdadmin /usr/local/sbin/refreshcontainers.sh\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/lxd_server/10-automating.md:53
#, no-wrap
msgid "Set up the crontab for the lxdadmin user to run this script, in this case at 10 PM:\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/lxd_server/10-automating.md:59
#, no-wrap
msgid "And your entry will look like this:\n"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/lxd_server/10-automating.md:60
#, no-wrap
msgid "00 22 * * * /usr/local/sbin/refreshcontainers.sh > /home/lxdadmin/refreshlog 2>&1\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/lxd_server/10-automating.md:67
#, no-wrap
msgid "This will create a log in lxdadmin's home directory called \"refreshlog\" which will give you knowledge of whether your process worked or not. Very important!\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/lxd_server/10-automating.md:69
#, no-wrap
msgid "The automated procedure will fail sometimes. This generally happens when a particular container fails to refresh. You can manually re-run the refresh with the following command (assuming rockylinux-test-9 here, as our container):\n"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/lxd_server/10-automating.md:70
#, no-wrap
msgid "lxc copy --refresh rockylinux-test-9 lxd-snapshot:rockylinux-test-9\n"
msgstr ""
