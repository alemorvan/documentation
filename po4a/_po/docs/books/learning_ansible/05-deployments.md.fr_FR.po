# French translations for po package
# Traductions fran網ises du paquet po
# Copyright (C) 2023 Free Software Foundation, Inc.
# This file is distributed under the same license as the po package.
# Automatically generated, 2023.
#
msgid ""
msgstr ""
"Project-Id-Version: po 4a\n"
"POT-Creation-Date: 2023-06-11 15:28+0000\n"
"PO-Revision-Date: 2023-06-11 15:28+0000\n"
"Last-Translator: Automatically generated\n"
"Language-Team: none\n"
"Language: fr\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Plural-Forms: nplurals=2; plural=(n > 1);\n"

#. type: YAML Front Matter: title
#: ../src/docs/books/learning_ansible/05-deployments.md:1
#, no-wrap
msgid "Deploy With Ansistrano"
msgstr ""

#. type: Title #
#: ../src/docs/books/learning_ansible/05-deployments.md:5
#, no-wrap
msgid "Ansible Deployments with Ansistrano"
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:8
msgid ""
"In this chapter you will learn how to deploy applications with the Ansible "
"role [Ansistrano](https://ansistrano.com)."
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:12
#, no-wrap
msgid "**Objectives**: In this chapter you will learn how to:\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:18
#, no-wrap
msgid ""
":heavy_check_mark: Implement Ansistrano;       \n"
":heavy_check_mark: Configure Ansistrano;       \n"
":heavy_check_mark: Use shared folders and files between deployed versions;       \n"
":heavy_check_mark: Deploying different versions of a site from git;        \n"
":heavy_check_mark: React between deployment steps.          \n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:20
msgid ""
":checkered_flag: **ansible**, **ansistrano**, **roles**, **deployments**"
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:23
#, no-wrap
msgid ""
"**Knowledge**: :star: :star:      \n"
"**Complexity**: :star: :star: :star:\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:25
#, no-wrap
msgid "**Reading time**: 40 minutes\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:30
msgid ""
"Ansistrano is an Ansible role to easily deploy PHP, Python, etc. "
"applications.  It is based on the functionality of [Capistrano](http://"
"capistranorb.com/)."
msgstr ""

#. type: Title ##
#: ../src/docs/books/learning_ansible/05-deployments.md:31
#, no-wrap
msgid "Introduction"
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:34
msgid "Ansistrano requires the following to run:"
msgstr ""

#. type: Bullet: '* '
#: ../src/docs/books/learning_ansible/05-deployments.md:37
msgid "Ansible on the deployment machine,"
msgstr ""

#. type: Bullet: '* '
#: ../src/docs/books/learning_ansible/05-deployments.md:37
msgid "`rsync` or `git` on the client machine."
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:39
msgid ""
"It can download source code from `rsync`, `git`, `scp`, `http`, `S3`, ..."
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:41
#: ../src/docs/books/learning_ansible/05-deployments.md:124
#: ../src/docs/books/learning_ansible/05-deployments.md:196
#: ../src/docs/books/learning_ansible/05-deployments.md:616
msgid "!!! Note"
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:43
#, no-wrap
msgid "    For our deployment example, we will use the `git` protocol.\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:45
msgid "Ansistrano deploys applications by following these 5 steps:"
msgstr ""

#. type: Bullet: '* '
#: ../src/docs/books/learning_ansible/05-deployments.md:50
msgid "**Setup**: create the directory structure to host the releases;"
msgstr ""

#. type: Bullet: '* '
#: ../src/docs/books/learning_ansible/05-deployments.md:50
msgid "**Update Code**: downloading the new release to the targets;"
msgstr ""

#. type: Bullet: '* '
#: ../src/docs/books/learning_ansible/05-deployments.md:50
msgid ""
"**Symlink Shared** and **Symlink**: after deploying the new release, the "
"`current` symbolic link is modified to point to this new release;"
msgstr ""

#. type: Bullet: '* '
#: ../src/docs/books/learning_ansible/05-deployments.md:50
msgid "**Clean Up**: to do some clean up (remove old versions)."
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:52
#: ../src/docs/books/learning_ansible/05-deployments.md:681
msgid "![Stages of a deployment](images/ansistrano-001.png)"
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:54
msgid "The skeleton of a deployment with Ansistrano looks like this:"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/learning_ansible/05-deployments.md:55
#, no-wrap
msgid ""
"/var/www/site/\n"
"칙춦춮칙춦칙춦 current -> ./releases/20210718100000Z\n"
"칙춦춮칙춦칙춦 releases\n"
"칙춦축츽먞 칙춦춦칙춦칙춦 20210718100000Z\n"
"칙춦축츽먞     칙춦춮칙춦칙춦 css -> ../../shared/css/\n"
"칙춦축츽먞     칙춦춮칙춦칙춦 img -> ../../shared/img/\n"
"칙춦축츽먞     칙춦춦칙춦칙춦 REVISION\n"
"칙춦춮칙춦칙춦 repo\n"
"칙춦춦칙춦칙춦 shared\n"
"    칙춦춮칙춦칙춦 css/\n"
"    칙춦춦칙춦칙춦 img/\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:70
msgid ""
"You can find all the Ansistrano documentation on its [Github repository]"
"(https://github.com/ansistrano/deploy)."
msgstr ""

#. type: Title ##
#: ../src/docs/books/learning_ansible/05-deployments.md:71
#, no-wrap
msgid "Labs"
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:74
msgid "You will continue to work on your 2 servers:"
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:76
msgid "The management server:"
msgstr ""

#. type: Bullet: '* '
#: ../src/docs/books/learning_ansible/05-deployments.md:78
msgid ""
"Ansible is already installed. You will have to install the `ansistrano."
"deploy` role."
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:80
msgid "The managed server:"
msgstr ""

#. type: Bullet: '* '
#: ../src/docs/books/learning_ansible/05-deployments.md:82
msgid "You will need to install Apache and deploy the client site."
msgstr ""

#. type: Title ###
#: ../src/docs/books/learning_ansible/05-deployments.md:83
#, no-wrap
msgid "Deploying the Web server"
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:86
msgid ""
"For more efficiency, we will use the `geerlingguy.apache` role to configure "
"the server:"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/learning_ansible/05-deployments.md:87
#, no-wrap
msgid ""
"$ ansible-galaxy role install geerlingguy.apache\n"
"Starting galaxy role install process\n"
"- downloading role 'apache', owned by geerlingguy\n"
"- downloading role from https://github.com/geerlingguy/ansible-role-apache/archive/3.1.4.tar.gz\n"
"- extracting geerlingguy.apache to /home/ansible/.ansible/roles/geerlingguy.apache\n"
"- geerlingguy.apache (3.1.4) was installed successfully\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:97
msgid ""
"We will probably need to open some firewall rules, so we will also install "
"the collection `ansible.posix` to work with its module `firewalld`:"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/learning_ansible/05-deployments.md:98
#, no-wrap
msgid ""
"$ ansible-galaxy collection install ansible.posix\n"
"Starting galaxy collection install process\n"
"Process install dependency map\n"
"Starting collection install process\n"
"Downloading https://galaxy.ansible.com/download/ansible-posix-1.2.0.tar.gz to /home/ansible/.ansible/tmp/ansible-local-519039bp65pwn/tmpsvuj1fw5/ansible-posix-1.2.0-bhjbfdpw\n"
"Installing 'ansible.posix:1.2.0' to '/home/ansible/.ansible/collections/ansible_collections/ansible/posix'\n"
"ansible.posix:1.2.0 was installed successfully\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:109
msgid ""
"Once the role and the collection are installed, we can create the first part "
"of our playbook, which will:"
msgstr ""

#. type: Bullet: '* '
#: ../src/docs/books/learning_ansible/05-deployments.md:115
msgid "Install Apache,"
msgstr ""

#. type: Bullet: '* '
#: ../src/docs/books/learning_ansible/05-deployments.md:115
msgid "Create a target folder for our `vhost`,"
msgstr ""

#. type: Bullet: '* '
#: ../src/docs/books/learning_ansible/05-deployments.md:115
msgid "Create a default `vhost`,"
msgstr ""

#. type: Bullet: '* '
#: ../src/docs/books/learning_ansible/05-deployments.md:115
msgid "Open the firewall,"
msgstr ""

#. type: Bullet: '* '
#: ../src/docs/books/learning_ansible/05-deployments.md:115
msgid "Start or restart Apache."
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:117
msgid "Technical considerations:"
msgstr ""

#. type: Bullet: '* '
#: ../src/docs/books/learning_ansible/05-deployments.md:122
msgid "We will deploy our site to the `/var/www/site/` folder."
msgstr ""

#. type: Bullet: '* '
#: ../src/docs/books/learning_ansible/05-deployments.md:122
msgid ""
"As we will see later, `ansistrano` will create a `current` symbolic link to "
"the current release folder."
msgstr ""

#. type: Bullet: '* '
#: ../src/docs/books/learning_ansible/05-deployments.md:122
msgid ""
"The source code to be deployed contains a `html` folder which the vhost "
"should point to. Its `DirectoryIndex` is `index.htm`."
msgstr ""

#. type: Bullet: '* '
#: ../src/docs/books/learning_ansible/05-deployments.md:122
msgid "The deployment is done by `git`, the package will be installed."
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:126
#, no-wrap
msgid "    The target of our vhost will therefore be: `/var/www/site/current/html`.\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:128
msgid "Our playbook to configure the server: `playbook-config-server.yml`"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/learning_ansible/05-deployments.md:129
#, no-wrap
msgid ""
"---\n"
"- hosts: ansible_clients\n"
"  become: yes\n"
"  become_user: root\n"
"  vars:\n"
"    dest: \"/var/www/site/\"\n"
"    apache_global_vhost_settings: |\n"
"      DirectoryIndex index.php index.htm\n"
"    apache_vhosts:\n"
"      - servername: \"website\"\n"
"        documentroot: \"{{ dest }}current/html\"\n"
"\n"
"  tasks:\n"
"\n"
"    - name: create directory for website\n"
"      file:\n"
"        path: /var/www/site/\n"
"        state: directory\n"
"        mode: 0755\n"
"\n"
"    - name: install git\n"
"      package:\n"
"        name: git\n"
"        state: latest\n"
"\n"
"    - name: permit traffic in default zone for http service\n"
"      ansible.posix.firewalld:\n"
"        service: http\n"
"        permanent: yes\n"
"        state: enabled\n"
"        immediate: yes\n"
"\n"
"  roles:\n"
"    - { role: geerlingguy.apache }\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:167
msgid "The playbook can be applied to the server:"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/learning_ansible/05-deployments.md:168
#, no-wrap
msgid "$ ansible-playbook playbook-config-server.yml\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:173
msgid "Note the execution of the following tasks:"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/learning_ansible/05-deployments.md:174
#, no-wrap
msgid ""
"TASK [geerlingguy.apache : Ensure Apache is installed on RHEL.] ****************\n"
"TASK [geerlingguy.apache : Configure Apache.] **********************************\n"
"TASK [geerlingguy.apache : Add apache vhosts configuration.] *******************\n"
"TASK [geerlingguy.apache : Ensure Apache has selected state and enabled on boot.] ***\n"
"TASK [permit traffic in default zone for http service] *************************\n"
"RUNNING HANDLER [geerlingguy.apache : restart apache] **************************\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:184
msgid ""
"The `geerlingguy.apache` role makes our job much easier by taking care of "
"the installation and configuration of Apache."
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:186
msgid "You can check that everything is working by using `curl`:"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/learning_ansible/05-deployments.md:187
#, no-wrap
msgid ""
"$ curl -I http://192.168.1.11\n"
"HTTP/1.1 404 Not Found\n"
"Date: Mon, 05 Jul 2021 23:30:02 GMT\n"
"Server: Apache/2.4.37 (rocky) OpenSSL/1.1.1g\n"
"Content-Type: text/html; charset=iso-8859-1\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:198
#, no-wrap
msgid "    We have not yet deployed any code, so it is normal for `curl` to return a `404` HTTP code. But we can already confirm that the `httpd` service is working and that the firewall is open.\n"
msgstr ""

#. type: Title ###
#: ../src/docs/books/learning_ansible/05-deployments.md:199
#, no-wrap
msgid "Deploying the software"
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:202
msgid "Now that our server is configured, we can deploy the application."
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:204
msgid ""
"For this, we will use the `ansistrano.deploy` role in a second playbook "
"dedicated to application deployment (for more readability)."
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/learning_ansible/05-deployments.md:205
#, no-wrap
msgid ""
"$ ansible-galaxy role install ansistrano.deploy\n"
"Starting galaxy role install process\n"
"- downloading role 'deploy', owned by ansistrano\n"
"- downloading role from https://github.com/ansistrano/deploy/archive/3.10.0.tar.gz\n"
"- extracting ansistrano.deploy to /home/ansible/.ansible/roles/ansistrano.deploy\n"
"- ansistrano.deploy (3.10.0) was installed successfully\n"
"\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:216
msgid ""
"The sources of the software can be found in the [github repository](https://"
"github.com/alemorvan/demo-ansible.git)."
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:218
msgid ""
"We will create a playbook `playbook-deploy.yml` to manage our deployment:"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/learning_ansible/05-deployments.md:219
#, no-wrap
msgid ""
"---\n"
"- hosts: ansible_clients\n"
"  become: yes\n"
"  become_user: root\n"
"  vars:\n"
"    dest: \"/var/www/site/\"\n"
"    ansistrano_deploy_via: \"git\"\n"
"    ansistrano_git_repo: https://github.com/alemorvan/demo-ansible.git\n"
"    ansistrano_deploy_to: \"{{ dest }}\"\n"
"\n"
"  roles:\n"
"     - { role: ansistrano.deploy }\n"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/learning_ansible/05-deployments.md:234
#, no-wrap
msgid ""
"$ ansible-playbook playbook-deploy.yml\n"
"\n"
"PLAY [ansible_clients] *********************************************************\n"
"\n"
"TASK [ansistrano.deploy : ANSISTRANO | Ensure deployment base path exists] *****\n"
"TASK [ansistrano.deploy : ANSISTRANO | Ensure releases folder exists]\n"
"TASK [ansistrano.deploy : ANSISTRANO | Ensure shared elements folder exists]\n"
"TASK [ansistrano.deploy : ANSISTRANO | Ensure shared paths exists]\n"
"TASK [ansistrano.deploy : ANSISTRANO | Ensure basedir shared files exists]\n"
"TASK [ansistrano.deploy : ANSISTRANO | Get release version] ********************\n"
"TASK [ansistrano.deploy : ANSISTRANO | Get release path]\n"
"TASK [ansistrano.deploy : ANSISTRANO | GIT | Register ansistrano_git_result variable]\n"
"TASK [ansistrano.deploy : ANSISTRANO | GIT | Set git_real_repo_tree]\n"
"TASK [ansistrano.deploy : ANSISTRANO | GIT | Create release folder]\n"
"TASK [ansistrano.deploy : ANSISTRANO | GIT | Sync repo subtree[\"\"] to release path]\n"
"TASK [ansistrano.deploy : ANSISTRANO | Copy git released version into REVISION file]\n"
"TASK [ansistrano.deploy : ANSISTRANO | Ensure shared paths targets are absent]\n"
"TASK [ansistrano.deploy : ANSISTRANO | Create softlinks for shared paths and files]\n"
"TASK [ansistrano.deploy : ANSISTRANO | Ensure .rsync-filter is absent]\n"
"TASK [ansistrano.deploy : ANSISTRANO | Setup .rsync-filter with shared-folders]\n"
"TASK [ansistrano.deploy : ANSISTRANO | Get current folder]\n"
"TASK [ansistrano.deploy : ANSISTRANO | Remove current folder if it's a directory]\n"
"TASK [ansistrano.deploy : ANSISTRANO | Change softlink to new release]\n"
"TASK [ansistrano.deploy : ANSISTRANO | Clean up releases]\n"
"\n"
"PLAY RECAP ********************************************************************************************************************************************************************************************************\n"
"192.168.1.11               : ok=25   changed=8    unreachable=0    failed=0    skipped=14   rescued=0    ignored=0   \n"
"\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:266
msgid "So many things done with only 11 lines of code!"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/learning_ansible/05-deployments.md:267
#, no-wrap
msgid ""
"$ curl http://192.168.1.11\n"
"<html>\n"
"<head>\n"
"<title>Demo Ansible</title>\n"
"</head>\n"
"<body>\n"
"<h1>Version Master</h1>\n"
"</body>\n"
"<html>\n"
msgstr ""

#. type: Title ###
#: ../src/docs/books/learning_ansible/05-deployments.md:279
#, no-wrap
msgid "Checking on the server"
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:282
msgid "You can now connect by ssh to your client machine."
msgstr ""

#. type: Bullet: '* '
#: ../src/docs/books/learning_ansible/05-deployments.md:284
msgid "Make a `tree` on the `/var/www/site/` directory:"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/learning_ansible/05-deployments.md:285
#, no-wrap
msgid ""
"$ tree /var/www/site/\n"
"/var/www/site\n"
"칙춦춮칙춦칙춦 current -> ./releases/20210722155312Z\n"
"칙춦춮칙춦칙춦 releases\n"
"칙춦축츽먞 칙춦춦칙춦칙춦 20210722155312Z\n"
"칙춦축츽먞     칙춦춮칙춦칙춦 REVISION\n"
"칙춦축츽먞     칙춦춦칙춦칙춦 html\n"
"칙춦축츽먞         칙춦춦칙춦칙춦 index.htm\n"
"칙춦춮칙춦칙춦 repo\n"
"칙춦축츽먞 칙춦춦칙춦칙춦 html\n"
"칙춦축츽먞     칙춦춦칙춦칙춦 index.htm\n"
"칙춦춦칙춦칙춦 shared\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:301
#: ../src/docs/books/learning_ansible/05-deployments.md:336
msgid "Please note:"
msgstr ""

#. type: Bullet: '* '
#: ../src/docs/books/learning_ansible/05-deployments.md:305
msgid "the `current` symlink to the release `./releases/20210722155312Z`"
msgstr ""

#. type: Bullet: '* '
#: ../src/docs/books/learning_ansible/05-deployments.md:305
msgid "the presence of a directory `shared`"
msgstr ""

#. type: Bullet: '* '
#: ../src/docs/books/learning_ansible/05-deployments.md:305
msgid "the presence of the git repos in `./repo/`"
msgstr ""

#. type: Bullet: '* '
#: ../src/docs/books/learning_ansible/05-deployments.md:307
msgid ""
"From the Ansible server, restart the deployment **3** times, then check on "
"the client."
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/learning_ansible/05-deployments.md:308
#, no-wrap
msgid ""
"$ tree /var/www/site/\n"
"var/www/site\n"
"칙춦춮칙춦칙춦 current -> ./releases/20210722160048Z\n"
"칙춦춮칙춦칙춦 releases\n"
"칙춦축츽먞 칙춦춮칙춦칙춦 20210722155312Z\n"
"칙춦축츽먞 칙춦축츽먞 칙춦춮칙춦칙춦 REVISION\n"
"칙춦축츽먞 칙춦축츽먞 칙춦춦칙춦칙춦 html\n"
"칙춦축츽먞 칙춦축츽먞     칙춦춦칙춦칙춦 index.htm\n"
"칙춦축츽먞 칙춦춮칙춦칙춦 20210722160032Z\n"
"칙춦축츽먞 칙춦축츽먞 칙춦춮칙춦칙춦 REVISION\n"
"칙춦축츽먞 칙춦축츽먞 칙춦춦칙춦칙춦 html\n"
"칙춦축츽먞 칙춦축츽먞     칙춦춦칙춦칙춦 index.htm\n"
"칙춦축츽먞 칙춦춮칙춦칙춦 20210722160040Z\n"
"칙춦축츽먞 칙춦축츽먞 칙춦춮칙춦칙춦 REVISION\n"
"칙춦축츽먞 칙춦축츽먞 칙춦춦칙춦칙춦 html\n"
"칙춦축츽먞 칙춦축츽먞     칙춦춦칙춦칙춦 index.htm\n"
"칙춦축츽먞 칙춦춦칙춦칙춦 20210722160048Z\n"
"칙춦축츽먞     칙춦춮칙춦칙춦 REVISION\n"
"칙춦축츽먞     칙춦춦칙춦칙춦 html\n"
"칙춦축츽먞         칙춦춦칙춦칙춦 index.htm\n"
"칙춦춮칙춦칙춦 repo\n"
"칙춦축츽먞 칙춦춦칙춦칙춦 html\n"
"칙춦축츽먞     칙춦춦칙춦칙춦 index.htm\n"
"칙춦춦칙춦칙춦 shared\n"
msgstr ""

#. type: Bullet: '* '
#: ../src/docs/books/learning_ansible/05-deployments.md:339
msgid "`ansistrano` kept the 4 last releases,"
msgstr ""

#. type: Bullet: '* '
#: ../src/docs/books/learning_ansible/05-deployments.md:339
msgid "the `current` link linked now to the lastest release"
msgstr ""

#. type: Title ###
#: ../src/docs/books/learning_ansible/05-deployments.md:340
#, no-wrap
msgid "Limit the number of releases"
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:343
msgid ""
"The `ansistrano_keep_releases` variable is used to specify the number of "
"releases to keep."
msgstr ""

#. type: Bullet: '* '
#: ../src/docs/books/learning_ansible/05-deployments.md:345
msgid ""
"Using the `ansistrano_keep_releases` variable, keep only 3 releases of the "
"project. Check."
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/learning_ansible/05-deployments.md:346
#, no-wrap
msgid ""
"---\n"
"- hosts: ansible_clients\n"
"  become: yes\n"
"  become_user: root\n"
"  vars:\n"
"    dest: \"/var/www/site/\"\n"
"    ansistrano_deploy_via: \"git\"\n"
"    ansistrano_git_repo: https://github.com/alemorvan/demo-ansible.git\n"
"    ansistrano_deploy_to: \"{{ dest }}\"\n"
"    ansistrano_keep_releases: 3\n"
"\n"
"  roles:\n"
"     - { role: ansistrano.deploy }\n"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/learning_ansible/05-deployments.md:362
#, no-wrap
msgid ""
"---\n"
"$ ansible-playbook -i hosts playbook-deploy.yml\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:368
#: ../src/docs/books/learning_ansible/05-deployments.md:437
msgid "On the client machine:"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/learning_ansible/05-deployments.md:369
#, no-wrap
msgid ""
"$ tree /var/www/site/\n"
"/var/www/site\n"
"칙춦춮칙춦칙춦 current -> ./releases/20210722160318Z\n"
"칙춦춮칙춦칙춦 releases\n"
"칙춦축츽먞 칙춦춮칙춦칙춦 20210722160040Z\n"
"칙춦축츽먞 칙춦축츽먞 칙춦춮칙춦칙춦 REVISION\n"
"칙춦축츽먞 칙춦축츽먞 칙춦춦칙춦칙춦 html\n"
"칙춦축츽먞 칙춦축츽먞     칙춦춦칙춦칙춦 index.htm\n"
"칙춦축츽먞 칙춦춮칙춦칙춦 20210722160048Z\n"
"칙춦축츽먞 칙춦축츽먞 칙춦춮칙춦칙춦 REVISION\n"
"칙춦축츽먞 칙춦축츽먞 칙춦춦칙춦칙춦 html\n"
"칙춦축츽먞 칙춦축츽먞     칙춦춦칙춦칙춦 index.htm\n"
"칙춦축츽먞 칙춦춦칙춦칙춦 20210722160318Z\n"
"칙춦축츽먞     칙춦춮칙춦칙춦 REVISION\n"
"칙춦축츽먞     칙춦춦칙춦칙춦 html\n"
"칙춦축츽먞         칙춦춦칙춦칙춦 index.htm\n"
"칙춦춮칙춦칙춦 repo\n"
"칙춦축츽먞 칙춦춦칙춦칙춦 html\n"
"칙춦축츽먞     칙춦춦칙춦칙춦 index.htm\n"
"칙춦춦칙춦칙춦 shared\n"
msgstr ""

#. type: Title ###
#: ../src/docs/books/learning_ansible/05-deployments.md:392
#, no-wrap
msgid "Using shared_paths and shared_files"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/learning_ansible/05-deployments.md:395
#, no-wrap
msgid ""
"---\n"
"- hosts: ansible_clients\n"
"  become: yes\n"
"  become_user: root\n"
"  vars:\n"
"    dest: \"/var/www/site/\"\n"
"    ansistrano_deploy_via: \"git\"\n"
"    ansistrano_git_repo: https://github.com/alemorvan/demo-ansible.git\n"
"    ansistrano_deploy_to: \"{{ dest }}\"\n"
"    ansistrano_keep_releases: 3\n"
"    ansistrano_shared_paths:\n"
"      - \"img\"\n"
"      - \"css\"\n"
"    ansistrano_shared_files:\n"
"      - \"logs\"\n"
"\n"
"  roles:\n"
"     - { role: ansistrano.deploy }\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:417
msgid ""
"On the client machine, create the file `logs` in the `shared` directory:"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/learning_ansible/05-deployments.md:418
#, no-wrap
msgid "sudo touch /var/www/site/shared/logs\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:423
msgid "Then execute the playbook:"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/learning_ansible/05-deployments.md:424
#, no-wrap
msgid ""
"TASK [ansistrano.deploy : ANSISTRANO | Ensure shared paths targets are absent] *******************************************************\n"
"ok: [192.168.10.11] => (item=img)\n"
"ok: [192.168.10.11] => (item=css)\n"
"ok: [192.168.10.11] => (item=logs/log)\n"
"\n"
"TASK [ansistrano.deploy : ANSISTRANO | Create softlinks for shared paths and files] **************************************************\n"
"changed: [192.168.10.11] => (item=img)\n"
"changed: [192.168.10.11] => (item=css)\n"
"changed: [192.168.10.11] => (item=logs)\n"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/learning_ansible/05-deployments.md:438
#, no-wrap
msgid ""
"$  tree -F /var/www/site/\n"
"/var/www/site/\n"
"칙춦춮칙춦칙춦 current -> ./releases/20210722160631Z/\n"
"칙춦춮칙춦칙춦 releases/\n"
"칙춦축츽먞 칙춦춮칙춦칙춦 20210722160048Z/\n"
"칙춦축츽먞 칙춦축츽먞 칙춦춮칙춦칙춦 REVISION\n"
"칙춦축츽먞 칙춦축츽먞 칙춦춦칙춦칙춦 html/\n"
"칙춦축츽먞 칙춦축츽먞     칙춦춦칙춦칙춦 index.htm\n"
"칙춦축츽먞 칙춦춮칙춦칙춦 20210722160318Z/\n"
"칙춦축츽먞 칙춦축츽먞 칙춦춮칙춦칙춦 REVISION\n"
"칙춦축츽먞 칙춦축츽먞 칙춦춦칙춦칙춦 html/\n"
"칙춦축츽먞 칙춦축츽먞     칙춦춦칙춦칙춦 index.htm\n"
"칙춦축츽먞 칙춦춦칙춦칙춦 20210722160631Z/\n"
"칙춦축츽먞     칙춦춮칙춦칙춦 REVISION\n"
"칙춦축츽먞     칙춦춮칙춦칙춦 css -> ../../shared/css/\n"
"칙춦축츽먞     칙춦춮칙춦칙춦 html/\n"
"칙춦축츽먞     칙춦축츽먞 칙춦춦칙춦칙춦 index.htm\n"
"칙춦축츽먞     칙춦춮칙춦칙춦 img -> ../../shared/img/\n"
"칙춦축츽먞     칙춦춦칙춦칙춦 logs -> ../../shared/logs\n"
"칙춦춮칙춦칙춦 repo/\n"
"칙춦축츽먞 칙춦춦칙춦칙춦 html/\n"
"칙춦축츽먞     칙춦춦칙춦칙춦 index.htm\n"
"칙춦춦칙춦칙춦 shared/\n"
"    칙춦춮칙춦칙춦 css/\n"
"    칙춦춮칙춦칙춦 img/\n"
"    칙춦춦칙춦칙춦 logs\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:468
msgid ""
"Please note that the last release contains 3 links: `css`, `img`, and `logs`"
msgstr ""

#. type: Bullet: '* '
#: ../src/docs/books/learning_ansible/05-deployments.md:472
msgid "from `/var/www/site/releases/css` to the `../../shared/css/` directory."
msgstr ""

#. type: Bullet: '* '
#: ../src/docs/books/learning_ansible/05-deployments.md:472
msgid "from `/var/www/site/releases/img` to the `../../shared/img/` directory."
msgstr ""

#. type: Bullet: '* '
#: ../src/docs/books/learning_ansible/05-deployments.md:472
msgid "from `/var/www/site/releases/logs` to the `../../shared/logs` file."
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:474
msgid ""
"Therefore, the files contained in these 2 folders and the `logs` file are "
"always accessible via the following paths:"
msgstr ""

#. type: Bullet: '* '
#: ../src/docs/books/learning_ansible/05-deployments.md:478
msgid "`/var/www/site/current/css/`,"
msgstr ""

#. type: Bullet: '* '
#: ../src/docs/books/learning_ansible/05-deployments.md:478
msgid "`/var/www/site/current/img/`,"
msgstr ""

#. type: Bullet: '* '
#: ../src/docs/books/learning_ansible/05-deployments.md:478
msgid "`/var/www/site/current/logs`,"
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:480
msgid "but above all they will be kept from one release to the next."
msgstr ""

#. type: Title ###
#: ../src/docs/books/learning_ansible/05-deployments.md:481
#, no-wrap
msgid "Use a sub-directory of the repository for deployment"
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:484
msgid ""
"In our case, the repository contains a `html` folder, which contains the "
"site files."
msgstr ""

#. type: Bullet: '* '
#: ../src/docs/books/learning_ansible/05-deployments.md:486
msgid ""
"To avoid this extra level of directory, use the `ansistrano_git_repo_tree` "
"variable by specifying the path of the sub-directory to use."
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:488
msgid ""
"Don't forget to modify the Apache configuration to take into account this "
"change!"
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:490
msgid ""
"Change the playbook for the server configuration `playbook-config-server.yml`"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/learning_ansible/05-deployments.md:491
#, no-wrap
msgid ""
"---\n"
"- hosts: ansible_clients\n"
"  become: yes\n"
"  become_user: root\n"
"  vars:\n"
"    dest: \"/var/www/site/\"\n"
"    apache_global_vhost_settings: |\n"
"      DirectoryIndex index.php index.htm\n"
"    apache_vhosts:\n"
"      - servername: \"website\"\n"
"        documentroot: \"{{ dest }}current/\" # <1>\n"
"\n"
"  tasks:\n"
"\n"
"    - name: create directory for website\n"
"      file:\n"
"        path: /var/www/site/\n"
"        state: directory\n"
"        mode: 0755\n"
"\n"
"    - name: install git\n"
"      package:\n"
"        name: git\n"
"        state: latest\n"
"\n"
"  roles:\n"
"    - { role: geerlingguy.apache }\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:522
#: ../src/docs/books/learning_ansible/05-deployments.md:548
#, no-wrap
msgid "<1> Modify this line\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:524
msgid "Change the playbook for the deployment `playbook-deploy.yml`"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/learning_ansible/05-deployments.md:525
#, no-wrap
msgid ""
"---\n"
"- hosts: ansible_clients\n"
"  become: yes\n"
"  become_user: root\n"
"  vars:\n"
"    dest: \"/var/www/site/\"\n"
"    ansistrano_deploy_via: \"git\"\n"
"    ansistrano_git_repo: https://github.com/alemorvan/demo-ansible.git\n"
"    ansistrano_deploy_to: \"{{ dest }}\"\n"
"    ansistrano_keep_releases: 3\n"
"    ansistrano_shared_paths:\n"
"      - \"img\"\n"
"      - \"css\"\n"
"    ansistrano_shared_files:\n"
"      - \"log\"\n"
"    ansistrano_git_repo_tree: 'html' # <1>\n"
"\n"
"  roles:\n"
"     - { role: ansistrano.deploy }\n"
msgstr ""

#. type: Bullet: '* '
#: ../src/docs/books/learning_ansible/05-deployments.md:550
msgid "Don't forget to run both of the playbooks"
msgstr ""

#. type: Bullet: '* '
#: ../src/docs/books/learning_ansible/05-deployments.md:552
msgid "Check on the client machine:"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/learning_ansible/05-deployments.md:553
#, no-wrap
msgid ""
"$  tree -F /var/www/site/\n"
"/var/www/site/\n"
"칙춦춮칙춦칙춦 current -> ./releases/20210722161542Z/\n"
"칙춦춮칙춦칙춦 releases/\n"
"칙춦축츽먞 칙춦춮칙춦칙춦 20210722160318Z/\n"
"칙춦축츽먞 칙춦축츽먞 칙춦춮칙춦칙춦 REVISION\n"
"칙춦축츽먞 칙춦축츽먞 칙춦춦칙춦칙춦 html/\n"
"칙춦축츽먞 칙춦축츽먞     칙춦춦칙춦칙춦 index.htm\n"
"칙춦축츽먞 칙춦춮칙춦칙춦 20210722160631Z/\n"
"칙춦축츽먞 칙춦축츽먞 칙춦춮칙춦칙춦 REVISION\n"
"칙춦축츽먞 칙춦축츽먞 칙춦춮칙춦칙춦 css -> ../../shared/css/\n"
"칙춦축츽먞 칙춦축츽먞 칙춦춮칙춦칙춦 html/\n"
"칙춦축츽먞 칙춦축츽먞 칙춦축츽먞 칙춦춦칙춦칙춦 index.htm\n"
"칙춦축츽먞 칙춦축츽먞 칙춦춮칙춦칙춦 img -> ../../shared/img/\n"
"칙춦축츽먞 칙춦축츽먞 칙춦춦칙춦칙춦 logs -> ../../shared/logs\n"
"칙춦축츽먞 칙춦춦칙춦칙춦 20210722161542Z/\n"
"칙춦축츽먞     칙춦춮칙춦칙춦 REVISION\n"
"칙춦축츽먞     칙춦춮칙춦칙춦 css -> ../../shared/css/\n"
"칙춦축츽먞     칙춦춮칙춦칙춦 img -> ../../shared/img/\n"
"칙춦축츽먞     칙춦춮칙춦칙춦 index.htm\n"
"칙춦축츽먞     칙춦춦칙춦칙춦 logs -> ../../shared/logs\n"
"칙춦춮칙춦칙춦 repo/\n"
"칙춦축츽먞 칙춦춦칙춦칙춦 html/\n"
"칙춦축츽먞     칙춦춦칙춦칙춦 index.htm\n"
"칙춦춦칙춦칙춦 shared/\n"
"    칙춦춮칙춦칙춦 css/\n"
"    칙춦춮칙춦칙춦 img/\n"
"    칙춦춦칙춦칙춦 logs\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:585
#, no-wrap
msgid "<1> Please note the absence of `html`\n"
msgstr ""

#. type: Title ###
#: ../src/docs/books/learning_ansible/05-deployments.md:586
#, no-wrap
msgid "Managing git branch or tags"
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:589
msgid ""
"The `ansistrano_git_branch` variable is used to specify a `branch` or `tag` "
"to deploy."
msgstr ""

#. type: Bullet: '* '
#: ../src/docs/books/learning_ansible/05-deployments.md:591
msgid "Deploy the `releases/v1.1.0` branch:"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/learning_ansible/05-deployments.md:592
#, no-wrap
msgid ""
"---\n"
"- hosts: ansible_clients\n"
"  become: yes\n"
"  become_user: root\n"
"  vars:\n"
"    dest: \"/var/www/site/\"\n"
"    ansistrano_deploy_via: \"git\"\n"
"    ansistrano_git_repo: https://github.com/alemorvan/demo-ansible.git\n"
"    ansistrano_deploy_to: \"{{ dest }}\"\n"
"    ansistrano_keep_releases: 3\n"
"    ansistrano_shared_paths:\n"
"      - \"img\"\n"
"      - \"css\"\n"
"    ansistrano_shared_files:\n"
"      - \"log\"\n"
"    ansistrano_git_repo_tree: 'html'\n"
"    ansistrano_git_branch: 'releases/v1.1.0'\n"
"\n"
"  roles:\n"
"     - { role: ansistrano.deploy }\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:618
#, no-wrap
msgid "    You can have fun, during the deployment, refreshing your browser, to see in 'live' the change.\n"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/learning_ansible/05-deployments.md:619
#, no-wrap
msgid ""
"$ curl http://192.168.1.11\n"
"<html>\n"
"<head>\n"
"<title>Demo Ansible</title>\n"
"</head>\n"
"<body>\n"
"<h1>Version 1.0.1</h1>\n"
"</body>\n"
"<html>\n"
msgstr ""

#. type: Bullet: '* '
#: ../src/docs/books/learning_ansible/05-deployments.md:632
msgid "Deploy the `v2.0.0` tag:"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/learning_ansible/05-deployments.md:633
#, no-wrap
msgid ""
"---\n"
"- hosts: ansible_clients\n"
"  become: yes\n"
"  become_user: root\n"
"  vars:\n"
"    dest: \"/var/www/site/\"\n"
"    ansistrano_deploy_via: \"git\"\n"
"    ansistrano_git_repo: https://github.com/alemorvan/demo-ansible.git\n"
"    ansistrano_deploy_to: \"{{ dest }}\"\n"
"    ansistrano_keep_releases: 3\n"
"    ansistrano_shared_paths:\n"
"      - \"img\"\n"
"      - \"css\"\n"
"    ansistrano_shared_files:\n"
"      - \"log\"\n"
"    ansistrano_git_repo_tree: 'html'\n"
"    ansistrano_git_branch: 'v2.0.0'\n"
"\n"
"  roles:\n"
"     - { role: ansistrano.deploy }\n"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/learning_ansible/05-deployments.md:656
#, no-wrap
msgid ""
"$ curl http://192.168.1.11\n"
"<html>\n"
"<head>\n"
"<title>Demo Ansible</title>\n"
"</head>\n"
"<body>\n"
"<h1>Version 2.0.0</h1>\n"
"</body>\n"
"<html>\n"
msgstr ""

#. type: Title ###
#: ../src/docs/books/learning_ansible/05-deployments.md:668
#, no-wrap
msgid "Actions between deployment steps"
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:671
msgid "A deployment with Ansistrano respects the following steps:"
msgstr ""

#. type: Bullet: '* '
#: ../src/docs/books/learning_ansible/05-deployments.md:677
msgid "`Setup`"
msgstr ""

#. type: Bullet: '* '
#: ../src/docs/books/learning_ansible/05-deployments.md:677
msgid "`Update Code`"
msgstr ""

#. type: Bullet: '* '
#: ../src/docs/books/learning_ansible/05-deployments.md:677
msgid "`Symlink Shared`"
msgstr ""

#. type: Bullet: '* '
#: ../src/docs/books/learning_ansible/05-deployments.md:677
msgid "`Symlink`"
msgstr ""

#. type: Bullet: '* '
#: ../src/docs/books/learning_ansible/05-deployments.md:677
msgid "`Clean Up`"
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:679
msgid "It is possible to intervene before and after each of these steps."
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:683
msgid ""
"A playbook can be included through the variables provided for this purpose:"
msgstr ""

#. type: Bullet: '* '
#: ../src/docs/books/learning_ansible/05-deployments.md:686
msgid "`ansistrano_before_<task>_tasks_file`"
msgstr ""

#. type: Bullet: '* '
#: ../src/docs/books/learning_ansible/05-deployments.md:686
msgid "or `ansistrano_after_<task>_tasks_file`"
msgstr ""

#. type: Bullet: '* '
#: ../src/docs/books/learning_ansible/05-deployments.md:688
msgid ""
"Easy example: send an email (or whatever you want like Slack notification) "
"at the beginning of the deployment:"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/learning_ansible/05-deployments.md:690
#, no-wrap
msgid ""
"---\n"
"- hosts: ansible_clients\n"
"  become: yes\n"
"  become_user: root\n"
"  vars:\n"
"    dest: \"/var/www/site/\"\n"
"    ansistrano_deploy_via: \"git\"\n"
"    ansistrano_git_repo: https://github.com/alemorvan/demo-ansible.git\n"
"    ansistrano_deploy_to: \"{{ dest }}\"\n"
"    ansistrano_keep_releases: 3\n"
"    ansistrano_shared_paths:\n"
"      - \"img\"\n"
"      - \"css\"\n"
"    ansistrano_shared_files:\n"
"      - \"logs\"\n"
"    ansistrano_git_repo_tree: 'html'\n"
"    ansistrano_git_branch: 'v2.0.0'\n"
"    ansistrano_before_setup_tasks_file: \"{{ playbook_dir }}/deploy/before-setup-tasks.yml\"\n"
"\n"
"  roles:\n"
"     - { role: ansistrano.deploy }\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:715
msgid "Create the file `deploy/before-setup-tasks.yml`:"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/learning_ansible/05-deployments.md:716
#, no-wrap
msgid ""
"---\n"
"- name: Send a mail\n"
"  mail:\n"
"    subject: Starting deployment on {{ ansible_hostname }}.\n"
"  delegate_to: localhost\n"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/learning_ansible/05-deployments.md:724
#, no-wrap
msgid ""
"TASK [ansistrano.deploy : include] *************************************************************************************\n"
"included: /home/ansible/deploy/before-setup-tasks.yml for 192.168.10.11\n"
"\n"
"TASK [ansistrano.deploy : Send a mail] *************************************************************************************\n"
"ok: [192.168.10.11 -> localhost]\n"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/learning_ansible/05-deployments.md:732
#, no-wrap
msgid ""
"[root] # mailx\n"
"Heirloom Mail version 12.5 7/5/10.  Type ? for help.\n"
"\"/var/spool/mail/root\": 1 message 1 new\n"
">N  1 root@localhost.local  Tue Aug 21 14:41  28/946   \"Starting deployment on localhost.\"\n"
msgstr ""

#. type: Bullet: '* '
#: ../src/docs/books/learning_ansible/05-deployments.md:740
msgid ""
"You will probably have to restart some services at the end of the "
"deployment, to flush caches for example. Let's restart Apache at the end of "
"the deployment:"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/learning_ansible/05-deployments.md:741
#, no-wrap
msgid ""
"---\n"
"- hosts: ansible_clients\n"
"  become: yes\n"
"  become_user: root\n"
"  vars:\n"
"    dest: \"/var/www/site/\"\n"
"    ansistrano_deploy_via: \"git\"\n"
"    ansistrano_git_repo: https://github.com/alemorvan/demo-ansible.git\n"
"    ansistrano_deploy_to: \"{{ dest }}\"\n"
"    ansistrano_keep_releases: 3\n"
"    ansistrano_shared_paths:\n"
"      - \"img\"\n"
"      - \"css\"\n"
"    ansistrano_shared_files:\n"
"      - \"logs\"\n"
"    ansistrano_git_repo_tree: 'html'\n"
"    ansistrano_git_branch: 'v2.0.0'\n"
"    ansistrano_before_setup_tasks_file: \"{{ playbook_dir }}/deploy/before-setup-tasks.yml\"\n"
"    ansistrano_after_symlink_tasks_file: \"{{ playbook_dir }}/deploy/after-symlink-tasks.yml\"\n"
"\n"
"  roles:\n"
"     - { role: ansistrano.deploy }\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:767
msgid "Create the file `deploy/after-symlink-tasks.yml`:"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/learning_ansible/05-deployments.md:768
#, no-wrap
msgid ""
"---\n"
"- name: restart apache\n"
"  systemd:\n"
"    name: httpd\n"
"    state: restarted\n"
msgstr ""

#. type: Fenced code block
#: ../src/docs/books/learning_ansible/05-deployments.md:776
#, no-wrap
msgid ""
"TASK [ansistrano.deploy : include] *************************************************************************************\n"
"included: /home/ansible/deploy/after-symlink-tasks.yml for 192.168.10.11\n"
"\n"
"TASK [ansistrano.deploy : restart apache] **************************************************************************************\n"
"changed: [192.168.10.11]\n"
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:785
msgid ""
"As you have seen during this chapter, Ansible can greatly improve the life "
"of the system administrator. Very intelligent roles like Ansistrano are "
"\"must haves\" that quickly become indispensable."
msgstr ""

#. type: Plain text
#: ../src/docs/books/learning_ansible/05-deployments.md:786
msgid ""
"Using Ansistrano, ensures that good deployment practices are respected, "
"reduces the time needed to put a system into production, and avoids the risk "
"of potential human errors. The machine works fast, well, and rarely makes "
"mistakes!"
msgstr ""
