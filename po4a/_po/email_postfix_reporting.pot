# SOME DESCRIPTIVE TITLE
# Copyright (C) YEAR Free Software Foundation, Inc.
# This file is distributed under the same license as the PACKAGE package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: PACKAGE VERSION\n"
"POT-Creation-Date: 2023-06-16 14:06+0000\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"Language: \n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#. type: Title ##
#: ../src/docs/books/admin_guide/13-softwares.md:900
#: ../src/docs/books/nvchad/nvchad_ui/nvimtree.md:105
#: ../src/docs/books/nvchad/template_chadrc.md:352
#: ../src/docs/gemstones/bash_stub.md:103
#: ../src/docs/gemstones/perl_search_replace.md:38
#: ../src/docs/gemstones/sed_search_replace.md:72
#: ../src/docs/gemstones/systemd_service_for_python_script.md:172
#: ../src/docs/guides/automation/olivetin.md:142
#: ../src/docs/guides/cms/dokuwiki_server.md:306
#: ../src/docs/guides/communications/asterisk_installation.md:261
#: ../src/docs/guides/containers/lxd_web_servers.md:919
#: ../src/docs/guides/containers/podman-nextcloud.md:456
#: ../src/docs/guides/contribute/local_docs.md:47
#: ../src/docs/guides/contribute/mkdocs_lsyncd.md:322
#: ../src/docs/guides/contribute/navigation.md:129
#: ../src/docs/guides/contribute/rockydocs_formatting.md:458
#: ../src/docs/guides/database/database_mariadb-server.md:197
#: ../src/docs/guides/desktop/kde_installation.md:105
#: ../src/docs/guides/desktop/mate_installation.md:200
#: ../src/docs/guides/desktop/xfce_installation.md:218
#: ../src/docs/guides/editors/micro.md:79
#: ../src/docs/guides/email/postfix_reporting.md:254
#: ../src/docs/guides/file_sharing/secure_ftp_server_vsftpd.md:270
#: ../src/docs/guides/file_sharing/sftp.md:765
#: ../src/docs/guides/proxies/pound.md:460
#: ../src/docs/guides/security/dnf_automatic.md:119
#: ../src/docs/guides/security/enabling_iptables_firewall.md:54
#: ../src/docs/guides/security/firewalld-beginners.md:427
#: ../src/docs/guides/security/firewalld.md:477
#: ../src/docs/guides/security/pam.md:137
#: ../src/docs/guides/security/ssl_keys_https.md:136
#: ../src/docs/guides/virtualization/vbox-rocky.md:160
#: ../src/docs/guides/web/apache_hardened_webserver/index.md:147
#: ../src/docs/guides/web/apache_hardened_webserver/modsecurity.md:235
#: ../src/docs/guides/web/apache_hardened_webserver/ossec-hids.md:157
#: ../src/docs/guides/web/apache_hardened_webserver/rkhunter.md:91
#: ../src/docs/guides/web/mod_SSL_apache.md:171
#: ../src/docs/guides/web/nginx-mainline.md:352
#: ../src/docs/guides/web/nginx-multisite.md:359
#, no-wrap
msgid "Conclusion"
msgstr ""

#. type: Title #
#: ../src/docs/books/disa_stig/disa_stig_part2.md:13
#: ../src/docs/books/disa_stig/disa_stig_part1.md:23
#: ../src/docs/books/learning_ansible/05-deployments.md:31
#: ../src/docs/books/learning_bash/appendix/02-variables-logs.md:14
#: ../src/docs/books/lxd_server/00-toc.md:1
#: ../src/docs/books/lxd_server/00-toc.md:13
#: ../src/docs/books/nvchad/index.md:12
#: ../src/docs/books/nvchad/plugins/index.md:14
#: ../src/docs/books/nvchad/plugins/md_preview.md:14
#: ../src/docs/books/nvchad/plugins/projectmgr.md:14
#: ../src/docs/books/nvchad/vale_nvchad.md:12
#: ../src/docs/gemstones/dnf-swap.md:18 ../src/docs/gemstones/docker.md:10
#: ../src/docs/gemstones/nmtui.md:8 ../src/docs/gemstones/setup_local_repo.md:8
#: ../src/docs/gemstones/string_color.md:11
#: ../src/docs/guides/automation/cron_jobs_howto.md:25
#: ../src/docs/guides/automation/olivetin.md:14
#: ../src/docs/guides/automation/templates-automation-packer-vsphere.md:25
#: ../src/docs/guides/backup/mirroring_lsyncd.md:26
#: ../src/docs/guides/backup/rsnapshot_backup.md:22
#: ../src/docs/guides/backup/rsync_ssh.md:24
#: ../src/docs/guides/cms/cloud_server_using_nextcloud.md:28
#: ../src/docs/guides/cms/dokuwiki_server.md:23
#: ../src/docs/guides/containers/lxd_web_servers.md:10
#: ../src/docs/guides/containers/podman-nextcloud.md:13
#: ../src/docs/guides/contribute/local_docs.md:11
#: ../src/docs/guides/contribute/mkdocs_lsyncd.md:11
#: ../src/docs/guides/contribute/mkdocs_venv.md:14
#: ../src/docs/guides/contribute/style_guide.md:14
#: ../src/docs/guides/database/database_mariadb-server.md:21
#: ../src/docs/guides/desktop/kde_installation.md:11
#: ../src/docs/guides/dns/private_dns_server_using_bind.md:22
#: ../src/docs/guides/editors/micro.md:14
#: ../src/docs/guides/email/postfix_reporting.md:22
#: ../src/docs/guides/file_sharing/glusterfs.md:16
#: ../src/docs/guides/file_sharing/secure_ftp_server_vsftpd.md:21
#: ../src/docs/guides/file_sharing/sftp.md:16
#: ../src/docs/guides/migrate2rocky.md:18
#: ../src/docs/guides/network/basic_network_configuration.md:12
#: ../src/docs/guides/network/librenms_monitoring_server.md:13
#: ../src/docs/guides/package_management/index.md:1
#: ../src/docs/guides/package_management/index.md:5
#: ../src/docs/guides/proxies/haproxy_apache_lxd.md:9
#: ../src/docs/guides/proxies/pound.md:17
#: ../src/docs/guides/security/authentication/active_directory_authentication.md:13
#: ../src/docs/guides/security/enabling_iptables_firewall.md:22
#: ../src/docs/guides/security/firewalld-beginners.md:10
#: ../src/docs/guides/security/generating_ssl_keys_lets_encrypt.md:23
#: ../src/docs/guides/security/ssh_public_private_keys.md:21
#: ../src/docs/guides/security/ssl_keys_https.md:22
#: ../src/docs/guides/virtualization/vbox-rocky.md:13
#: ../src/docs/guides/web/apache-sites-enabled.md:25
#: ../src/docs/guides/web/apache_hardened_webserver/index.md:23
#: ../src/docs/guides/web/apache_hardened_webserver/modsecurity.md:24
#: ../src/docs/guides/web/apache_hardened_webserver/ossec-hids.md:22
#: ../src/docs/guides/web/apache_hardened_webserver/rkhunter.md:23
#: ../src/docs/guides/web/nginx-mainline.md:13
#: ../src/docs/guides/web/nginx-multisite.md:14
#: ../src/docs/labs/security/introduction.md:1
#: ../src/docs/labs/security/introduction.md:5
#, no-wrap
msgid "Introduction"
msgstr ""

#. type: YAML Front Matter: contributors
#: ../src/docs/books/lxd_server/00-toc.md:1
#: ../src/docs/books/lxd_server/01-install.md:1
#: ../src/docs/books/lxd_server/02-zfs_setup.md:1
#: ../src/docs/books/lxd_server/03-lxdinit.md:1
#: ../src/docs/books/lxd_server/04-firewall.md:1
#: ../src/docs/books/lxd_server/05-lxd_images.md:1
#: ../src/docs/books/lxd_server/06-profiles.md:1
#: ../src/docs/books/lxd_server/07-configurations.md:1
#: ../src/docs/books/lxd_server/08-snapshots.md:1
#: ../src/docs/books/lxd_server/09-snapshot_server.md:1
#: ../src/docs/books/lxd_server/10-automating.md:1
#: ../src/docs/gemstones/bash_stub.md:1
#: ../src/docs/guides/automation/cron_jobs_howto.md:1
#: ../src/docs/guides/backup/rsnapshot_backup.md:1
#: ../src/docs/guides/cms/cloud_server_using_nextcloud.md:1
#: ../src/docs/guides/cms/dokuwiki_server.md:1
#: ../src/docs/guides/contribute/mkdocs_lsyncd.md:1
#: ../src/docs/guides/contribute/navigation.md:1
#: ../src/docs/guides/desktop/kde_installation.md:1
#: ../src/docs/guides/dns/private_dns_server_using_bind.md:1
#: ../src/docs/guides/email/postfix_reporting.md:1
#: ../src/docs/guides/file_sharing/secure_ftp_server_vsftpd.md:1
#: ../src/docs/guides/file_sharing/sftp.md:1
#: ../src/docs/guides/network/librenms_monitoring_server.md:1
#: ../src/docs/guides/security/enabling_iptables_firewall.md:1
#: ../src/docs/guides/security/ssh_public_private_keys.md:1
#: ../src/docs/guides/security/ssl_keys_https.md:1
#: ../src/docs/guides/web/apache-sites-enabled.md:1
#: ../src/docs/guides/web/apache_hardened_webserver/index.md:1
#: ../src/docs/guides/web/apache_hardened_webserver/modsecurity.md:1
#: ../src/docs/guides/web/apache_hardened_webserver/ossec-hids.md:1
#: ../src/docs/guides/web/apache_hardened_webserver/rkhunter.md:1
#, no-wrap
msgid "Ezequiel Bruni"
msgstr ""

#. type: Title ##
#: ../src/docs/books/lxd_server/30-appendix_a.md:15
#: ../src/docs/books/nvchad/vale_nvchad.md:16
#: ../src/docs/gemstones/systemd_service_for_python_script.md:20
#: ../src/docs/guides/automation/anacron.md:10
#: ../src/docs/guides/automation/cron_jobs_howto.md:14
#: ../src/docs/guides/backup/mirroring_lsyncd.md:13
#: ../src/docs/guides/backup/rsnapshot_backup.md:13
#: ../src/docs/guides/backup/rsync_ssh.md:12
#: ../src/docs/guides/communications/asterisk_installation.md:25
#: ../src/docs/guides/database/database_mariadb-server.md:13
#: ../src/docs/guides/desktop/kde_installation.md:20
#: ../src/docs/guides/desktop/mate_installation.md:17
#: ../src/docs/guides/desktop/xfce_installation.md:17
#: ../src/docs/guides/editors/micro.md:33
#: ../src/docs/guides/email/postfix_reporting.md:14
#: ../src/docs/guides/file_sharing/glusterfs.md:10
#: ../src/docs/guides/file_sharing/secure_ftp_server_vsftpd.md:14
#: ../src/docs/guides/interoperability/import_rocky_to_wsl.md:14
#: ../src/docs/guides/network/basic_network_configuration.md:16
#: ../src/docs/guides/security/authentication/active_directory_authentication.md:8
#: ../src/docs/guides/security/enabling_iptables_firewall.md:14
#: ../src/docs/guides/security/ssh_public_private_keys.md:14
#: ../src/docs/guides/security/ssl_keys_https.md:14
#: ../src/docs/guides/virtualization/vbox-rocky.md:19
#: ../src/docs/guides/web/apache_hardened_webserver/modsecurity.md:15
#: ../src/docs/guides/web/apache_hardened_webserver/ossec-hids.md:15
#: ../src/docs/guides/web/apache_hardened_webserver/rkhunter.md:14
#: ../src/docs/guides/web/mod_SSL_apache.md:14
#, no-wrap
msgid "Prerequisites"
msgstr ""

#. type: YAML Front Matter: tags
#: ../src/docs/guides/email/postfix_reporting.md:1
#, no-wrap
msgid "email"
msgstr ""

#. type: YAML Front Matter: tags
#: ../src/docs/guides/email/postfix_reporting.md:1
#, no-wrap
msgid "reports"
msgstr ""

#. type: YAML Front Matter: tags
#: ../src/docs/guides/email/postfix_reporting.md:1
#, no-wrap
msgid "tools"
msgstr ""

#. type: YAML Front Matter: title
#: ../src/docs/guides/email/postfix_reporting.md:1
#, no-wrap
msgid "Postfix Process Reporting"
msgstr ""

#. type: Title #
#: ../src/docs/guides/email/postfix_reporting.md:12
#, no-wrap
msgid "Using Postfix For Server Process Reporting"
msgstr ""

#. type: Bullet: '* '
#: ../src/docs/guides/email/postfix_reporting.md:21
#, no-wrap
msgid "Complete comfort operating from the command line on a Rocky Linux server\n"
msgstr ""

#. type: Bullet: '* '
#: ../src/docs/guides/email/postfix_reporting.md:21
#, no-wrap
msgid "Familiarity with an editor of your choice (this document uses the _vi_ editor, but you can substitute in your favorite editor)\n"
msgstr ""

#. type: Bullet: '* '
#: ../src/docs/guides/email/postfix_reporting.md:21
#, no-wrap
msgid "An understanding of DNS (the Domain Name System) and host names\n"
msgstr ""

#. type: Bullet: '* '
#: ../src/docs/guides/email/postfix_reporting.md:21
#, no-wrap
msgid "The ability to assign variables in a bash script\n"
msgstr ""

#. type: Bullet: '* '
#: ../src/docs/guides/email/postfix_reporting.md:21
#, no-wrap
msgid "Knowledge of what the _tail_, _more_, _grep_, and _date_ commands do\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:25
#, no-wrap
msgid "Many Rocky Linux server administrators write scripts to perform specific tasks, like backups or file synchronization, and many of these scripts generate logs that have useful and sometimes very important information. Just having the logs, though, is not enough. If a process fails and logs that failure, but the busy administrator does not review the log, then a catastrophe could be in the making.\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:27
#, no-wrap
msgid "This document shows you how to use the _postfix_ MTA (mail transfer agent) to grab log details from a particular process, and send them to you via email. It also touches on date formats in logs, and helps you identify which format you need to use in the reporting procedure.\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:29
#, no-wrap
msgid "Keep in mind, though, that this is just the tip of the iceberg as far as what can be done with reporting via postfix. Please note, too, that it is always a good security move to limit running processes to only those that you will need all the time.\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:31
#, no-wrap
msgid "This document shows you how to enable postfix only for the reporting you need it to do, and then shut it down again.\n"
msgstr ""

#. type: Title ##
#: ../src/docs/guides/email/postfix_reporting.md:32
#, no-wrap
msgid "Postfix Defined"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:35
#, no-wrap
msgid "postfix is a server daemon used for sending email. It is more secure and simpler than sendmail, another MTA that was the default go-to MTA for years. It can be used as part of a full-featured mail server.\n"
msgstr ""

#. type: Title ##
#: ../src/docs/guides/email/postfix_reporting.md:36
#, no-wrap
msgid "Installing postfix"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:39
#, no-wrap
msgid "Aside from postfix, we will need _mailx_ for testing our ability to send emails. To install both, and any dependencies required, enter the following on the Rocky Linux server command line:\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:41
#, no-wrap
msgid "`dnf install postfix mailx`\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:43
#, no-wrap
msgid "!!! warning \"Rocky Linux 9.0 Changes\"\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:45
#, no-wrap
msgid "    This procedure works perfectly fine in Rocky Linux 9.0. The difference here is where the `mailx` command comes from. While you can install it by name in 8.x, `mailx` comes from the appstream package `s-nail` in 9.0. To install the needed packages, you need to use:\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:49
#, no-wrap
msgid ""
"    ```\n"
"    dnf install postfix s-nail\n"
"    ```\n"
msgstr ""

#. type: Title ##
#: ../src/docs/guides/email/postfix_reporting.md:50
#, no-wrap
msgid "Testing And Configuring Postfix"
msgstr ""

#. type: Title ###
#: ../src/docs/guides/email/postfix_reporting.md:52
#, no-wrap
msgid "Testing Mail First"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:55
#, no-wrap
msgid "Before we configure postfix, we need to find out how mail will look when it leaves the server, because we will probably want to change this. To do this, start postfix:\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:57
#, no-wrap
msgid "`systemctl start postfix`\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:59
#, no-wrap
msgid "Then test it using mail command that is installed with mailx:\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:61
#, no-wrap
msgid "`mail -s \"Testing from server\" myname@mydomain.com`\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:63
#, no-wrap
msgid "This will bring up a blank line. Simply type your testing message in here:\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:65
#, no-wrap
msgid "`testing from the server`\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:67
#, no-wrap
msgid "Now hit enter, and enter a single period:\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:69
#, no-wrap
msgid "`.`\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:71
#, no-wrap
msgid "The system will respond with:\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:73
#, no-wrap
msgid "`EOT`\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:75
#, no-wrap
msgid "Our purpose for doing this is to check to see how our mail looks to the outside world, which we can get a feel for from the maillog that goes active with the starting of postfix.\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:77
#, no-wrap
msgid "Use this command to see the output of the log file:\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:79
#, no-wrap
msgid "`tail /var/log/maillog`\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:81
#, no-wrap
msgid "You should see something like this, although the log file may have different domains for the email address, etc:\n"
msgstr ""

#. type: Fenced code block
#: ../src/docs/guides/email/postfix_reporting.md:82
#, no-wrap
msgid ""
"Mar  4 16:51:40 hedgehogct postfix/postfix-script[735]: starting the Postfix mail system\n"
"Mar  4 16:51:40 hedgehogct postfix/master[737]: daemon started -- version 3.3.1, configuration /etc/postfix\n"
"Mar  4 16:52:04 hedgehogct postfix/pickup[738]: C9D42EC0ADD: uid=0 from=<root>\n"
"Mar  4 16:52:04 hedgehogct postfix/cleanup[743]: C9D42EC0ADD: message-id=<20210304165204.C9D42EC0ADD@somehost.localdomain>\n"
"Mar  4 16:52:04 hedgehogct postfix/qmgr[739]: C9D42EC0ADD: from=<root@somehost.localdomain>, size=457, nrcpt=1 (queue active)\n"
"Mar  4 16:52:05 hedgehogct postfix/smtp[745]: connect to gmail-smtp-in.l.google.com[2607:f8b0:4001:c03::1a]:25: Network is unreachable\n"
"Mar  4 16:52:06 hedgehogct postfix/smtp[745]: C9D42EC0ADD: to=<myname@mydomain.com>, relay=gmail-smtp-in.l.google.com[172.217.212.26]\n"
":25, delay=1.4, delays=0.02/0.02/0.99/0.32, dsn=2.0.0, status=sent (250 2.0.0 OK  1614876726 z8si17418573ilq.142 - gsmtp)\n"
"Mar  4 16:52:06 hedgehogct postfix/qmgr[739]: C9D42EC0ADD: removed\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:94
#, no-wrap
msgid "The \"somehost.localdomain\" shows us that we need to make some changes, so stop the postfix daemon first:\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:96
#, no-wrap
msgid "`systemctl stop postfix`\n"
msgstr ""

#. type: Title ##
#: ../src/docs/guides/email/postfix_reporting.md:97
#, no-wrap
msgid "Configuring Postfix"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:100
#, no-wrap
msgid "Since we aren't setting up a complete, fully functional mail server, the configuration options that we will be using are not as extensive. The first thing we need to do is to modify the _main.cf_ file (literally the main configuration file for postfix), so let's make a backup first:\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:102
#, no-wrap
msgid "`cp /etc/postfix/main.cf /etc/postfix/main.cf.bak`\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:104
#, no-wrap
msgid "Then edit it:\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:106
#, no-wrap
msgid "`vi /etc/postfix/main.cf`\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:108
#, no-wrap
msgid "In our example, our server name is going to be \"bruno\" and our domain name is going to be \"ourdomain.com\". Find the line in the file:\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:110
#, no-wrap
msgid "`#myhostname = host.domain.tld`\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:112
#, no-wrap
msgid "You can either remove the remark (#) or you can add a new line under this line. Based on our example, the line would read:\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:114
#, no-wrap
msgid "`myhostname = bruno.ourdomain.com`\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:116
#, no-wrap
msgid "Next, find the line for the domain name:\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:118
#, no-wrap
msgid "`#mydomain = domain.tld`\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:120
#, no-wrap
msgid "Either remove the remark and change it, or add a new line:\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:122
#, no-wrap
msgid "`mydomain = ourdomain.com`\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:124
#, no-wrap
msgid "Finally, go to the bottom of the file and add this line:\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:126
#, no-wrap
msgid "`smtp_generic_maps = hash:/etc/postfix/generic`\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:128
#, no-wrap
msgid "Save your changes (in vi, that will be `Shift : wq!`) and exit the file.\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:130
#, no-wrap
msgid "Before we continue editing the generic file, we need to see how email will look. Specifically, we want to create the \"generic\" file that we referenced in the _main.cf_ file above:\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:132
#, no-wrap
msgid "`vi /etc/postfix/generic`\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:134
#, no-wrap
msgid "This file tells postfix how any email coming from this server should look. Remember our test email and the log file? This is where we fix all of that:\n"
msgstr ""

#. type: Fenced code block
#: ../src/docs/guides/email/postfix_reporting.md:135
#, no-wrap
msgid ""
"root@somehost.localdomain       root@bruno.ourdomain.com\n"
"@somehost.localdomain           root@bruno.ourdomain.com\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:140
#, no-wrap
msgid "Now we need to tell postfix to use all of our changes. This is done with the postmap command:\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:142
#, no-wrap
msgid "`postmap /etc/postfix/generic`\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:144
#, no-wrap
msgid "Now start postfix and test your email again using the same procedure as above. You should now see that all of the \"localdomain\" instances have been changed to your actual domain.\n"
msgstr ""

#. type: Title ###
#: ../src/docs/guides/email/postfix_reporting.md:145
#, no-wrap
msgid "The date Command and a Variable Called today"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:148
#, no-wrap
msgid "Not every application will use the same logging format for the date. This means that you may have to get creative with any script you write for reporting by date.\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:150
#, no-wrap
msgid "Let's say that you want to look at your system log as an example and pull everything that has to do with dbus-daemon for today's date, and email it to yourself. (It's probably not the greatest example, but it will give you an idea of how we would do this.)\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:151
#, no-wrap
msgid "We need to use a a variable in our script that we will call \"today\" and we want it to relate to output from the \"date\" command and format it in a specific way, so that we can get the data we need from our system log (in _/var/log/messages_). To start with, let's do some investigative work.  \n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:154
#, no-wrap
msgid "First, enter the date command in the command line:\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:156
#, no-wrap
msgid "`date`\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:158
#, no-wrap
msgid "This should give you the default system date output, which could be something like this:\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:160
#, no-wrap
msgid "`Thu Mar  4 18:52:28 UTC 2021`\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:162
#, no-wrap
msgid "Now let's check our system log and see how it records information. To do this, we will use the \"more\" and \"grep\" commands:\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:164
#, no-wrap
msgid "`more /var/log/messages | grep dbus-daemon`\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:166
#, no-wrap
msgid "Which should give you something like this:\n"
msgstr ""

#. type: Fenced code block
#: ../src/docs/guides/email/postfix_reporting.md:167
#, no-wrap
msgid ""
"Mar  4 18:23:53 hedgehogct dbus-daemon[60]: [system] Successfully activated service 'org.freedesktop.nm_dispatcher'\n"
"Mar  4 18:50:41 hedgehogct dbus-daemon[60]: [system] Activating via systemd: service name='org.freedesktop.nm_dispatcher' unit='dbus-org.freedesktop.nm-dispatcher.service' requested by ':1.1' (uid=0 pid=61 comm=\"/usr/sbin/NetworkManager --no-daemon \" label=\"unconfined\")\n"
"Mar  4 18:50:41 hedgehogct dbus-daemon[60]: [system] Successfully activated service 'org.freedesktop.nm_dispatcher\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:174
#, no-wrap
msgid "The date and log outputs need to be exactly the same in our script, so let's look at how to format the date using a variable called \"today\".\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:176
#, no-wrap
msgid "First, let's look at what we need to do with the date to get the same output as the system log. You can reference the [Linux man page](https://man7.org/linux/man-pages/man1/date.1.html) or type `man date` on the command line to pull up the date manual page to get the information you need.\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:178
#, no-wrap
msgid "What you will find is that in order to format the date the same way that _/var/log/messages_ has it, we need to use the %b and %e format strings, with %b being the 3 character month and %e being the space-padded day.\n"
msgstr ""

#. type: Title ###
#: ../src/docs/guides/email/postfix_reporting.md:179
#, no-wrap
msgid "The Script"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:182
#, no-wrap
msgid "For our bash script, we can see that we are going to use the date command and a variable called \"today\". (Keep in mind that \"today\" is arbitrary. You could call this variable \"late_for_dinner\" if you wanted!). We will call our script in this example, test.sh and place it in _/usr/local/sbin_:\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:184
#: ../src/docs/guides/email/postfix_reporting.md:212
#: ../src/docs/guides/email/postfix_reporting.md:228
#, no-wrap
msgid "`vi /usr/local/sbin/test.sh`\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:186
#, no-wrap
msgid "Let's start with, well, the beginning of our script. Note that even though the comment in our file says we are sending these messages to email, for now, we are just sending them to a standard log output so that we can verify that they are correct.\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:188
#, no-wrap
msgid "Also, in our first attempt, we are grabbing all of the messages for the current date, not just the dbus-daemon messages. We will deal with that shortly.\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:190
#, no-wrap
msgid "Another thing to be aware of is that the grep command will return the filename in the output, which we don't want in this case, so we have added the \"-h\" option to grep to remove the prefix of the filename. In addition, once the variable \"today\" is set, we need to look for the entire variable as a string, so we need it all in quotes:\n"
msgstr ""

#. type: Fenced code block
#: ../src/docs/guides/email/postfix_reporting.md:191
#, no-wrap
msgid ""
"#!/bin/bash\n"
"\n"
"# set the date string to match /var/log/messages\n"
"today=`date +\"%b %e\"`\n"
"\n"
"# grab the dbus-daemon messages and send them to email\n"
"grep -h \"$today\" /var/log/messages\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:202
#, no-wrap
msgid "That's it for now, so save your changes and then make the script executable:\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:204
#, no-wrap
msgid "`chmod +x /usr/local/sbin/test.sh`\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:206
#, no-wrap
msgid "And then let's test it:\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:208
#, no-wrap
msgid "`/usr/local/sbin/test.sh`\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:210
#, no-wrap
msgid "If all works correctly, you should get a long list of all of the messages in /var/log/messages from today, including but not limited to the dbus-daemon messages.  If so, then the next step is to limit the messages to the dbus-daemon messages. So let's modify our script again:\n"
msgstr ""

#. type: Fenced code block
#: ../src/docs/guides/email/postfix_reporting.md:213
#, no-wrap
msgid ""
"#!/bin/bash\n"
"\n"
"# set the date string to match /var/log/messages\n"
"today=`date +\"%b %e\"`\n"
"\n"
"# grab the dbus-daemon messages and send them to email\n"
"grep -h \"$today\" /var/log/messages | grep dbus-daemon\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:224
#, no-wrap
msgid "Running the script again, should get you only the dbus-daemon messages and only the ones that occurred today (whenever you're following this guide).\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:226
#, no-wrap
msgid "There's one final step, however. Remember, we need to get this emailed to the administrator for review. Also, because we are only using _postfix_ on this server for reporting, we don't want to leave the service running, so we will start it at the beginning of the script and then stop it at the end. We'll introduce the _sleep_ command here to pause for 20 seconds to make sure that the email has been sent before shutting _postfix_ down again.  This final edit, adds the stop, start, and sleep issues just discussed, and also pipes the content to the administrator's email.\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:230
#, no-wrap
msgid "And modify the script:\n"
msgstr ""

#. type: Fenced code block
#: ../src/docs/guides/email/postfix_reporting.md:231
#, no-wrap
msgid ""
"#!/bin/bash\n"
"\n"
"# start postfix\n"
"/usr/bin/systemctl start postfix\n"
"\n"
"# set the date string to match /var/log/messages\n"
"today=`date +\"%b %e\"`\n"
"\n"
"# grab the dbus-daemon messages and send them to email\n"
"grep -h \"$today\" /var/log/messages | grep dbus-daemon | mail -s \"dbus-daemon messages for today\" myname@mydomain.com\n"
"\n"
"# make sure the email has finished before continuing\n"
"sleep 20\n"
"\n"
"# stop postfix\n"
"/usr/bin/systemctl stop postfix\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:251
#, no-wrap
msgid "Run the script again, and you should now have an email from the server with the dbus-daemon message.\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:253
#, no-wrap
msgid "You can now use [a crontab](../automation/cron_jobs_howto.md) to schedule this to run at a specific time.\n"
msgstr ""

#. type: Plain text
#: ../src/docs/guides/email/postfix_reporting.md:256
#, no-wrap
msgid "Using postfix can help you keep track of process logs that you want to monitor. You can use it along with bash scripting to gain a firm grasp of your system processes and be informed if there is trouble.\n"
msgstr ""
